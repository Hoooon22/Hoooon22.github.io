---
layout: default
title: 1.4.1 API 스타일
nav_order: 1
parent: 1.4 API에 대해
grand_parent: Backend
date: 2026-01-06 00:00:00
---

# 1.4.1 API 스타일 🎨

---

## 1. REST

Rest Api를 학습한 코드는 devzip에 게시하였습니다.

1️⃣ React 상태 관리 (useState)

```javascript
// 요청에 필요한 데이터
const [method, setMethod] = useState('GET');      // HTTP 메서드
const [url, setUrl] = useState('https://...');    // 요청 URL
const [headers, setHeaders] = useState('{...}');  // 헤더 (문자열)
const [body, setBody] = useState('');             // 바디

// 응답 결과 저장
const [response, setResponse] = useState(null);   // 응답 데이터
const [loading, setLoading] = useState(false);    // 로딩 상태
const [error, setError] = useState(null);         // 에러 메시지
```

핵심: 화면에 보여줄 데이터는 useState로 관리하고, set함수로 업데이트

---
2️⃣ fetch API 기본 구조

```javascript
const res = await fetch(url, {
    method: method,        // 'GET', 'POST', 'PUT', 'DELETE' 등
    headers: headerObj,    // { "Content-Type": "application/json" }
    body: body             // POST/PUT일 때만 사용
});
```

핵심: fetch(URL, 옵션객체) 형태로 HTTP 요청을 보냄

---
3️⃣ async/await 비동기 처리

```javascript
const executeRequest = async () => {  // async 함수 선언
    const res = await fetch(url);     // await로 응답 기다림
    const data = await res.json();    // await로 JSON 파싱 기다림
};
```

핵심:
- async = "이 함수는 비동기 작업을 합니다"
- await = "이 작업이 끝날 때까지 기다립니다"

---
4️⃣ try/catch/finally 에러 처리 패턴

```javascript
try {
    // 성공할 수도 있는 코드
    const res = await fetch(url);

} catch (err) {
    // 실패했을 때 실행
    setError(err.message);

} finally {
    // 성공/실패 상관없이 항상 실행
    setLoading(false);
}
```

핵심: 네트워크 요청은 항상 실패할 수 있으므로 try/catch 필수!

---
5️⃣ 응답(Response) 처리

```javascript
// 응답 객체에서 정보 추출
res.status        // 200, 404, 500 등 상태 코드
res.statusText    // "OK", "Not Found" 등
res.headers       // 응답 헤더들

// 응답 바디 파싱
await res.json()  // JSON 형태일 때
await res.text()  // 텍스트 형태일 때
```

핵심: res.json()도 비동기라서 await 필요!

---
6️⃣ HTTP 상태 코드 의미

200-299  →  성공 (초록색)
300-399  →  리다이렉트 (주황색)
400-499  →  클라이언트 오류 (빨간색) - 내 잘못
500-599  →  서버 오류 (보라색) - 서버 잘못

---
전체 흐름 요약

[전송 버튼 클릭]  
      ↓  
[로딩 시작, 이전 결과 초기화]  
      ↓  
[헤더 문자열 → JSON 객체로 변환]  
      ↓  
[fetch()로 HTTP 요청 전송]  
      ↓  
[응답 대기 (await)]  
      ↓  
[응답 헤더, 바디 파싱]  
      ↓  
[화면에 결과 표시]  
      ↓  
[로딩 종료]  

