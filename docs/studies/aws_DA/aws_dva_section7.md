---
layout: default
title: AWS (DVA) - Section 7
parent: AWS (DVA)
grand_parent: STUDY
---

# AWS Certified Developer Associate - Section 7 (AWS 기초: ELB + ASG)
{: .no_toc }

## 2023.11.21 (TUE) ~
{: .no_toc .text-delta }

---

# 고가용성 및 확장성


## 확장성
    애플리케이션 시스템이 조정을 통해 더 많은 양을 처리할 수 있다는 의미

- 수직 확장성
  - 인스턴스 크기 확장
  - 하드웨어 제한이 있기 때문에, 한계가 있다.
- 수평 확장성(탄력성)
  - 인스턴스나 시스템의 수를 늘리는 방법

## 고가용성
    애플리케이션 또는 시스템을 적어도 둘 이상의 AWS의 AZ나 데이터 센터에서 가동중인 것을 의미

- 고가용성의 목표: 데이터 센터에서의 손실을 막기 위해 (센터 하나가 멈춰도 계속 작동이 가능하게끔)

---

# 일래스틱 로드 밸런싱(ELB)

## 로드 밸런서
    서버 혹은 서버셋으로 트래픽을 백엔드나 다운스트림 EC2 인스턴스 또는 서버들로 전달하는 역할  
    = 관리형 로드 밸런서

- 쉽게 말해, 중재하는 관리자?
- 왜 필요한가?
  - 부하를 다수의 다운스트림 인스턴스로 분산하기 위해
  - 어떤 인스턴스로 트래픽을 보낼 수 없는지도 확인해준다.
  - 클라우드 내에서 개인 트래픽과 공공 트래픽을 분리할 수 있다.
<br /><br />
- AWS가 관리하며, 어떤 경우에도 작동할 것을 보장함. (고가용성을 책임)
- 무조건 쓰는 편이 좋음.
  - 자체 관리보다 저렴함
  - 로드밸런서는 다수의 AWS와 연동됨

## Health Checks
    ELB가 EC2 인스턴스의 작동이 올바르게 되고 있는지의 여부를 확인하기 위해 사용된다.

- 제대로 작동하지 않으면, 해당 인스턴스로 트래픽을 보낼 수 없기 때문에 Health Checks는 굉장히 중요하다.
- Health Checks는 포트와 라우트에서 이뤄진다.
- EC2에서 http 200 응답을 주지 않으면, unhealthy하다 판단하고 ELB는 그쪽으로 트래픽을 보내지 않는다.

## 로드 밸런서의 Types
1. Classic Load Balancer (v1) - call CLB
  - 지금은 권장하지 않음
2. Application Load Balancer (v2) - call ALB
3. Network Load Balancer (v2) - call NLB
4. Gateway Load Balancer - call GWLB

## 로드 밸런서의 보안그룹
- EC2 인스턴스의 보안 그룹을 로드 밸런서의 보안 그룹으로 연결한다.
  - 그렇게 되면 EC2 인스턴스는 로드 밸런서에서 온 트래픽만을 허용하게 된다.

## 1. CLB
  -> 이제 사용하지 않아, 다루지 않는다.

## 2. ALB
    7계층 - HTTP 전용 로드밸런서

- 동일 EC2 인스턴스 상의 여러 애플리케이션에 부하를 분산한다.
  - 컨테이너와 ECS를 사용함
- HTTP에서 HTTPS로 트래픽을 자동 리다이렉트를 하려는 경우, 로드 밸런서 레벨에서 가능하다.
- 경로 라우팅도 지원
- 뭐리 문자열과 헤더에 기반한 라우팅도 가능
- ALB 하나만으로도 다수의 애플리케이션을 처리할 수 있다.

## 3. NLB
    4계층 - TCP/UDP 트래픽 처리

- 고성능 (초당 수백만건 요청 처리)
- 가용 영역 당 하나의 고정 IP만 있다.
  - 각 가용 영역에 탄력적 IP를 배정할 수 있다.
  - 이건 여러 고정 IP가 있는 애플리케이션을 노출해야 할 때 유용
- NLB의 대상 그룹이 하는 상태 확인은 TCP, HTTP, HTTPS 프로토콜을 지원한다.

## 4. GWLB
    배포 및 확장과 AWS의 타사 네트워크 가상 어플라이언스의 플릿 관리에 사용됨

- 방화벽을 통과하게 하거나, 침입 탐지 및 방지 시스템에 사용된다.
- 1). 라우팅 테이블이 수정되면, 모든 사용자 트래픽은 GWLB를 통과
- 2). GWLB는 가상 어플라이언스의 대상 그룹 전반으로 트래픽을 확한
- 3). 모든 트래픽은 어플라이언스에 도달하고 어플라이언스는 트래픽을 분석하고 처리
- 4). 이상이 없다면 다시 GWLB로 보내고, 이상이 있으면 트래픽을 드롭
- 5). 허용된 트래픽은 GWLB에서 애필리케이션으로 보내짐
<br /><br />
- 기능
  - 1). 투명 네트워크 게이트웨이
  - 2). 로드밸런서


## ELB의 고정 세션 or 세션 밀접성